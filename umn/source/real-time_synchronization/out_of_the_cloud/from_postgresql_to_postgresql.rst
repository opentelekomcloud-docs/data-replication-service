:original_name: drs_04_0508.html

.. _drs_04_0508:

From PostgreSQL to PostgreSQL
=============================

Supported Source and Destination Databases
------------------------------------------

.. table:: **Table 1** Supported databases

   +-----------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------+
   | Source DB                                                             | Destination DB                                                                                                  |
   +=======================================================================+=================================================================================================================+
   | RDS for PostgreSQL (versions 9.5, 9.6, 10, 11, 12, 13, 14, 15 and 16) | -  On-premises databases (PostgreSQL 9.5, 9.6, 10, 11, 12, 13, 14, 15 and 16)                                   |
   |                                                                       | -  ECS-hosted databases (PostgreSQL 9.5, 9.6, 10, 11, 12, 13, 14, 15 and 16)                                    |
   |                                                                       |                                                                                                                 |
   |                                                                       | .. note::                                                                                                       |
   |                                                                       |                                                                                                                 |
   |                                                                       |    The major version of the destination database must be the same as or later than that of the source database. |
   +-----------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------+

Supported Synchronization Objects
---------------------------------

:ref:`Table 2 <drs_04_0508__table9915155511407>` lists the objects that can be synchronized in different scenarios. DRS will automatically check the objects you selected before the synchronization.

.. _drs_04_0508__table9915155511407:

.. table:: **Table 2** Supported synchronization objects

   +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Type                              | Notes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   +===================================+=============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | Objects                           | -  **Instance-level synchronization is not supported.** Only one database can be synchronized at a time. Multiple DRS tasks are required to synchronize multiple databases.                                                                                                                                                                                                                                                                                                                                 |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   | -  **Supported field types:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |    Digit, currency, character, binary, date/time, boolean, enumeration, geometry, network address, bit, text search, UUID, XML, JSON, array, compound, and range.                                                                                                                                                                                                                                                                                                                                           |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   | -  **Scope of full synchronization**                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |    -  The following objects are supported in the database-level synchronization: schemas, tables, indexes, constraints, views, materialized views, sequences, stored procedures, rules, triggers, foreign keys, sorting rules, plug-ins, code conversion information, aggregate functions, operators, statistics extension, conversion information, text search configurations, functions, data types, type conversion, event triggers, text search parsers, and text search templates                      |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |       During the table-level synchronization, only tables, views, materialized views, sequences, and common indexes can be synchronized.                                                                                                                                                                                                                                                                                                                                                                    |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |    -  System objects such as system schemas, system tables, system users, and system functions cannot be synchronized. Other objects such as tablespaces, foreign data wrappers, foreign servers, user mappings, releases, subscriptions, and users cannot be synchronized. Object permissions cannot be synchronized.                                                                                                                                                                                      |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |    .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |       The restrictions on the objects that can be synchronized are as follows:                                                                                                                                                                                                                                                                                                                                                                                                                              |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |       -  Object name: The database name cannot contain ``+"%'\<>,`` the schema name and table name cannot contain ".'<>, and the column name cannot contain double quotation marks (") and single quotation marks (').                                                                                                                                                                                                                                                                                      |
   |                                   |       -  Table: Temporary tables are not synchronized. During table-level synchronization, table constraints, indexes, and rules are synchronized, except for table triggers.                                                                                                                                                                                                                                                                                                                               |
   |                                   |       -  Function: Do not synchronize C language functions or functions with the leakproof or support attribute.                                                                                                                                                                                                                                                                                                                                                                                            |
   |                                   |       -  Plug-in: The metadata of plug-ins is not synchronized.                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |       -  Data type: Basic data types are not synchronized.                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   |                                   |       -  Type conversion: The binary coercion type cannot be converted.                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   | -  **Scope of incremental synchronization**                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |    -  Some DML statements, including INSERT, UPDATE, and DELETE, can be synchronized.                                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |    -  Some DDL statements can be synchronized, including TRUNCATE (only for PostgreSQL 11 or later), CREATE SCHEMA, CREATE TABLE, DROP TABLE, ALTER TABLE (including ADD COLUMN, DROP COLUMN, ALTER COLUMN, RENAME COLUMN, ADD CONSTRAINT, DROP CONSTRAINT and RENAME), CREATE SEQUENCE, DROP SEQUENCE, ALTER SEQUENCE, CREATE INDEX, ALTER INDEX, DROP INDEX, CREATE VIEW, ALTER VIEW, COMMENT ON COLUMN, COMMENT ON TABLE, COMMENT ON SCHEMA, COMMENT ON SEQUENCE, COMMENT ON INDEX, and COMMENT ON VIEW. |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |       During table-level synchronization, only the following DDL operations can be synchronized: TRUNCATE (only for PostgreSQL 11 or later), DROP TABLE, COMMENT ON COLUMN, COMMENT ON TABLE, and ALTER TABLE (including ADD COLUMN, DROP COLUMN, ALTER COLUMN, RENAME COLUMN, ADD CONSTRAINT, DROP CONSTRAINT and RENAME).                                                                                                                                                                                 |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |    -  Not synchronized: DML statements of unlogged tables and temporary tables                                                                                                                                                                                                                                                                                                                                                                                                                              |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |    .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |       -  The source database captures DDL statements using event triggers and records them in specific tables, so you need to create event triggers and functions in the source database in advance. For details, see :ref:`Creating Triggers and Functions to Implement Incremental DDL Synchronization for PostgreSQL <drs_03_0088>`.                                                                                                                                                                     |
   |                                   |       -  Incremental heartbeat information sending: For PostgreSQL 9.6 and later versions, if no data is written to the source database for a long time (more than 10 hours), the log extraction process invokes pg_logical_emit_message to insert heartbeat information into WAL logs of the source database, which ensures that the logical replication slot number is updated normally. (Only WAL logs are added, and services are not affected.)                                                        |
   +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Database Account Permission Requirements
----------------------------------------

To start a synchronization task, the source and destination database users must meet the requirements in the following table. Different types of synchronization tasks require different permissions. For details, see :ref:`Table 3 <drs_04_0508__table68938710614>`. DRS automatically checks the database account permissions in the pre-check phase and provides handling suggestions.

.. note::

   -  You are advised to create an independent database account for DRS task connection to prevent task failures caused by account modification.
   -  After changing the account passwords for the source or destination databases, :ref:`modify the connection information <drs_10_0016>` in the DRS task as soon as possible to prevent automatic retry after a task failure. Automatic retry will lock the database accounts.

.. _drs_04_0508__table68938710614:

.. table:: **Table 3** Database account permission

   +---------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Type                      | Full                                                                                                                                                                                                                                                                                                        | Full+Incremental                                                                                                                                                                                                                                                                            |
   +===========================+=============================================================================================================================================================================================================================================================================================================+=============================================================================================================================================================================================================================================================================================+
   | Source database user      | Database CONNECT permission, schema USAGE permission, table SELECT permission, and sequence SELECT permission                                                                                                                                                                                               | The CONNECT permission for databases, the USAGE permission for schemas, the SELECT permission for tables, the SELECT permissions for sequences, the UPDATE, DELETE, and TRUNCATE permissions for tables that do not have primary keys, and the permission to create replication connections |
   |                           |                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                             |
   |                           |                                                                                                                                                                                                                                                                                                             | .. note::                                                                                                                                                                                                                                                                                   |
   |                           |                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                             |
   |                           |                                                                                                                                                                                                                                                                                                             |    The UPDATE, DELETE, and TRUNCATE permissions for tables that do not have primary keys are only used to temporarily lock tables to ensure data consistency after the migration.                                                                                                           |
   +---------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Destination database user | -  **Database-level**:                                                                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                             |
   |                           |                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                             |
   |                           |    -  If the destination database is not postgres, the CREATEDB permission is required.                                                                                                                                                                                                                     |                                                                                                                                                                                                                                                                                             |
   |                           |    -  If the destination database is postgres, the CONNECT and CREATE permissions on the postgres database and the USAGE and CREATE permissions on public schemas are required.                                                                                                                             |                                                                                                                                                                                                                                                                                             |
   |                           |                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                             |
   |                           | -  **Table-level**:                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                             |
   |                           |                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                             |
   |                           |    -  To synchronize databases, the CREATEDB permission is required.                                                                                                                                                                                                                                        |                                                                                                                                                                                                                                                                                             |
   |                           |    -  To synchronize a schema, the CONNECT and CREATE permissions for the database that contains the schema are required.                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                             |
   |                           |    -  To synchronize objects in a schema, the CONNECT permission for the database that contains the schema, and the USAGE and CREATE permissions for the schema that contain the object are required.                                                                                                       |                                                                                                                                                                                                                                                                                             |
   |                           |                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                             |
   |                           |       .. note::                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                             |
   |                           |                                                                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                             |
   |                           |          If the destination database version is PostgreSQL 15 and no database is created on the destination database for database-level synchronization and table-level synchronization, full or incremental synchronization may fail due to lack of the USAGE and CREATE permissions of the public schema. |                                                                                                                                                                                                                                                                                             |
   +---------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Suggestions
-----------

.. caution::

   -  When a task is being started or in the full synchronization phase, do not perform DDL operations on the source database. Otherwise, the task may be abnormal.
   -  To keep data consistency before and after the synchronization, ensure that no data is written to the destination database during the synchronization.

-  The success of database synchronization depends on environment and manual operations. To ensure a smooth synchronization, perform a synchronization trial before you start the synchronization to help you detect and resolve problems in advance.

-  You are advised to start your synchronization task during off-peak hours by setting **Start Time** to **Start at a specified time**. A less active database is easier to synchronize successfully. If the data is fairly static, there is less likely to be any severe performance impacts during the synchronization.

   -  If network bandwidth is not limited, the query rate of the source database increases by about 50 MB/s during full synchronization, and two to four CPUs are occupied.
   -  To ensure data consistency, tables to be synchronized without a primary key may be locked for 3s.
   -  The data being synchronized may be locked by other transactions for a long period of time, resulting in read timeout.
   -  When DRS concurrently reads data from a database, it will use about 6 to 10 sessions. The impact of the connections on services must be considered.
   -  If you read a table, especially a large table, during the full migration, the exclusive lock on that table may be blocked.

-  Data-Level Comparison

   To obtain accurate comparison results, start data comparison at a specified time point during off-peak hours. If it is needed, select **Start at a specified time** for **Comparison Time**. Due to slight time difference and continuous operations on data, data inconsistency may occur, reducing the reliability and validity of the comparison results.

Precautions
-----------

The full+incremental synchronization process consists of four phases: task startup, full synchronization, incremental synchronization, and task completion. (A single incremental synchronization task or a single full synchronization task contains three phases.) To ensure smooth synchronization, read the following notes before creating a synchronization task.

.. table:: **Table 4** Precautions

   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Type                              | Constraints                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   +===================================+======================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | Starting a task                   | -  **Source database parameter requirements:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  The partition table trigger of the source database cannot be set to **disable**.                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  For a full synchronization task, the source database can be a standby database, but **hot_standby_feedback** must be set to **on**. For an incremental synchronization task, the source database cannot be a standby database.                                                                                                                                                                                                                                                                                                 |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  To perform incremental synchronization:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       The **wal_level** value of the source database must be **logical**.                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       The replica identity attribute of tables that do not have primary keys in the source database must be full.                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       The **max_replication_slots** value of the source database must be greater than the number of used replication slots.                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       The **max_wal_senders** value of the source database must be greater than or equal to the **max_replication_slots** value.                                                                                                                                                                                                                                                                                                                                                                                                     |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       If the toast attribute of the primary key column in the source database is main, external, or extended, the replica identity attribute must be full.                                                                                                                                                                                                                                                                                                                                                                           |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   | -  **Source database object requirements:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  Triggers with the same name cannot exist in the source database.                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   |                                   |    -  The objects that have dependencies must be synchronized at the same time. Otherwise, the synchronization may fail.                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   | -  **Destination database parameter requirements:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  The **block_size** value of the destination database must be greater than or equal to that of the source database.                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |    -  The **lc_monetary** values of the source and destination databases must be the same.                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                                   |    -  To perform incremental synchronization, if the synchronization object contains foreign keys, triggers, or event triggers, set **session_replication_role** of the destination database to **replica**. After the synchronization is complete, change the value to the original one.                                                                                                                                                                                                                                            |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   | -  **Destination database object requirements:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  The destination database cannot contain objects with the same type and name as the objects to be synchronized, including databases, schemas, and tables. System databases, system schemas, and system tables are excluded.                                                                                                                                                                                                                                                                                                     |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  The destination table can contain more columns than the source table. However, the following failures must be avoided:                                                                                                                                                                                                                                                                                                                                                                                                         |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       Assume that extra columns on the destination cannot be null or have default values. If newly inserted data records are synchronized from the source to the destination, the extra columns will become null, which does not meet the requirements of the destination and will cause the task to fail.                                                                                                                                                                                                                           |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       Assume that extra columns on the destination must be fixed at a default value and have a unique constraint. If newly inserted data records are synchronized from the source to the destination, the extra columns will contain multiple default values. That does not meet the unique constraint of the destination and will cause the task to fail.                                                                                                                                                                           |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  Before full synchronization, ensure that there is no data in the destination database table. Otherwise, data may be inconsistent or the task may fail.                                                                                                                                                                                                                                                                                                                                                                         |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  If retry upon failure or resumable transfer occurs during full synchronization, the **truncate** command is executed to clear data in tables without primary keys in the destination database that have not been synchronized, and then the tables are synchronized again. Before full synchronization, ensure that the synchronization user has the TRUNCATE permission on the tables without primary keys in the destination database. Otherwise, the task may fail.                                                         |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   | -  **Other notes:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  When a schema name or table name is mapped, to prevent conflicts between indexes and constraint names, the original index name in the table is changed to the following format after synchronization: i_+hash value+original index name (which may be truncated)+_key The hash value is calculated based on the original schema name_original table name_original index name. Similarly, the original constraint name on the table is changed to c\_ + hash value + original constraint name (which may be truncated) + \_key. |
   |                                   |    -  Before starting a full+incremental or incremental synchronization task, ensure that no long transaction is started in the source database. Starting the long transaction will block the creation of the logical replication slot and cause the task to fail.                                                                                                                                                                                                                                                                   |
   |                                   |    -  For a full+incremental or incremental synchronization task, if an internal error occurs during the pre-check and the task stops before it is started, check and delete the streaming replication slot by referring to :ref:`Forcibly Stopping Synchronization of PostgreSQL <drs_12_0009>` to avoid residual streaming replication slots in the source database.                                                                                                                                                               |
   |                                   |    -  After a full+incremental or incremental task is started, a primary/standby switchover can be performed only on the source database of the following versions: RDS for PostgreSQL 12.6 or later and RDS for PostgreSQL 13 or later.                                                                                                                                                                                                                                                                                             |
   |                                   |    -  By default, the PostgreSQL-to-PostgreSQL synchronization task does not support loopback or cascading synchronization. That is, data cannot be synchronized from instance A to instance B and then from instance B to instance C.                                                                                                                                                                                                                                                                                               |
   |                                   |    -  If you choose to synchronize DDL statements, ensure that the DDL statements executed on the source database are compatible with the destination database.                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |          DDL statements are captured using event triggers in the source database, recorded in a specific table, and then synchronized to the destination database. You need to create event triggers and functions in the source database before starting a task. For details, see :ref:`Creating Triggers and Functions to Implement Incremental DDL Synchronization for PostgreSQL <drs_03_0088>`.                                                                                                                                 |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Full synchronization              | -  Do not change the port of the source and destination databases, or change or delete the passwords and permissions of the source and destination database users. Otherwise, the task may fail.                                                                                                                                                                                                                                                                                                                                     |
   |                                   | -  Do not run any DDL statement in the source database. Otherwise, data may be inconsistent or the task may fail.                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                   | -  Do not write data to the destination database. Otherwise, data may be inconsistent.                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   |                                   | -  To ensure normal synchronization and data consistency, you are advised to create a DRS task again during off-peak hours to meet the preceding requirements.                                                                                                                                                                                                                                                                                                                                                                       |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Incremental synchronization       | -  Do not change the port of the source and destination databases, or change or delete the passwords and permissions of the source and destination database users. Otherwise, the task may fail.                                                                                                                                                                                                                                                                                                                                     |
   |                                   | -  Do not change the primary key or unique key (if the primary key does not exist) of the source database table. Otherwise, incremental data may be inconsistent or the task may fail.                                                                                                                                                                                                                                                                                                                                               |
   |                                   | -  Do not modify the replica identity attribute of tables in the source database. Otherwise, incremental data may be inconsistent or the task may fail.                                                                                                                                                                                                                                                                                                                                                                              |
   |                                   | -  Do not write data to the destination database. Otherwise, data may be inconsistent.                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   |                                   | -  To ensure normal synchronization and data consistency, you are advised to create a DRS task again during off-peak hours to meet the preceding requirements.                                                                                                                                                                                                                                                                                                                                                                       |
   |                                   | -  During database-level synchronization, if a table without a primary key is added to the source database, you must set **replica identity** of the table to **full** before writing data. Otherwise, data may be inconsistent or the task may fail.                                                                                                                                                                                                                                                                                |
   |                                   | -  During database-level synchronization, if a primary key table is added to the source database and the toast attribute of the primary key column is main, external, or extended, the replica identity attribute of the table must be set to full before writing data. Otherwise, data may be inconsistent or the task may fail.                                                                                                                                                                                                    |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Synchronization comparison        | -  You are advised to compare data in the source database during off-peak hours to prevent inconsistent data from being falsely reported and reduce the impact on the source database and DRS tasks.                                                                                                                                                                                                                                                                                                                                 |
   |                                   | -  During incremental synchronization, if data is written to the source database, the comparison results may be inconsistent.                                                                                                                                                                                                                                                                                                                                                                                                        |
   |                                   | -  Data cannot be compared during full synchronization.                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
   |                                   | -  Do not limit the synchronization speed during data comparison.                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Stopping a task                   | -  **Stop a task normally:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  The destination database sequence value is automatically reset. The auto-increment sequence value is the source database sequence value plus the security margin, and the auto-decrement sequence value is the source database sequence value minus the security margin. The default security margin is 10,000. If users are synchronized, the user memberships are automatically synchronized after the task is complete.                                                                                                     |
   |                                   |    -  When a full+incremental synchronization task is complete, the streaming replication slot created by the task in the source database is automatically deleted.                                                                                                                                                                                                                                                                                                                                                                  |
   |                                   |    -  If the value of destination database **session_replication_role** is **replica** when the full+incremental synchronization task is complete, change the value to **origin**.                                                                                                                                                                                                                                                                                                                                                   |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   | -  **Forcibly stop a task:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  You need to manually update the sequence value in the destination database. For details, see :ref:`Forcibly Stopping Synchronization of PostgreSQL <drs_12_0009>`.                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |    -  To forcibly stop a full+incremental real-time synchronization task, you need to manually delete the replication slots that may remain in the source database. For details, see :ref:`Forcibly Stopping Synchronization of PostgreSQL <drs_12_0009>`.                                                                                                                                                                                                                                                                           |
   |                                   |    -  If the value of destination database **session_replication_role** is **replica**, change it to **origin** to forcibly stop the full+incremental synchronization task.                                                                                                                                                                                                                                                                                                                                                          |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Procedure
---------

This section uses out-of-cloud synchronization from PostgreSQL to PostgreSQL as an example to describe how to configure a real-time synchronization task in the VPC network scenario.

#. On the **Data Synchronization Management** page, click **Create Synchronization Task**.

#. On the **Create Synchronization Instance** page, specify the task name, description, and the synchronization instance details, and click **Create Now**.

   -  Task information description

      .. table:: **Table 5** Task information

         +-------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
         | Parameter   | Description                                                                                                                                      |
         +=============+==================================================================================================================================================+
         | Region      | The region where the replication instance is deployed. You can change the region.                                                                |
         +-------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
         | Project     | The project corresponds to the current region and can be changed.                                                                                |
         +-------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
         | Task Name   | The task name must start with a letter and consist of 4 to 50 characters. It can contain only letters, digits, hyphens (-), and underscores (_). |
         +-------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
         | Description | The description consists of a maximum of 256 characters and cannot contain special characters ``!=<>'&"\``                                       |
         +-------------+--------------------------------------------------------------------------------------------------------------------------------------------------+

   -  Synchronization instance details

      .. table:: **Table 6** Synchronization instance settings

         +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Parameter                         | Description                                                                                                                                                                                                                                                                                                                         |
         +===================================+=====================================================================================================================================================================================================================================================================================================================================+
         | Data Flow                         | Select **Out of the cloud**.                                                                                                                                                                                                                                                                                                        |
         +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Source DB Engine                  | Select **PostgreSQL**.                                                                                                                                                                                                                                                                                                              |
         +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Destination DB Engine             | Select **PostgreSQL**.                                                                                                                                                                                                                                                                                                              |
         +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Network Type                      | Available options: **VPC**, **Public network**, and **VPN or Direct Connect**. **VPC** is used as an example.                                                                                                                                                                                                                       |
         |                                   |                                                                                                                                                                                                                                                                                                                                     |
         |                                   | -  VPC is suitable for data synchronization between cloud databases of the same account in the same region and VPC.                                                                                                                                                                                                                 |
         |                                   | -  Public network is suitable for data synchronization from on-premises or external cloud databases to the destination databases bound with an EIP.                                                                                                                                                                                 |
         |                                   | -  VPN or Direct Connect is suitable for data synchronization from on-premises databases to cloud databases, between databases of different accounts in the same region on the cloud, or between databases across regions on the cloud using a VPN, Direct Connect, Cloud Connect, VPCEP, or a VPC peering connection.              |
         +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Source DB Instance                | The RDS for PostgreSQL DB instance.                                                                                                                                                                                                                                                                                                 |
         +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Synchronization Instance Subnet   | Select the subnet where the synchronization instance is located. You can also click **View Subnets** to go to the network console to view the subnet where the instance resides.                                                                                                                                                    |
         |                                   |                                                                                                                                                                                                                                                                                                                                     |
         |                                   | By default, the DRS instance and the destination DB instance are in the same subnet. You need to select the subnet where the DRS instance resides, and there are available IP addresses for the subnet. To ensure that the synchronization instance is successfully created, only subnets with DHCP enabled are displayed.          |
         +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Synchronization Mode              | -  **Full+Incremental**                                                                                                                                                                                                                                                                                                             |
         |                                   |                                                                                                                                                                                                                                                                                                                                     |
         |                                   |    This synchronization mode allows you to synchronize data in real time. After a full synchronization initializes the destination database, an incremental synchronization parses logs to ensure data consistency between the source and destination databases.                                                                    |
         |                                   |                                                                                                                                                                                                                                                                                                                                     |
         |                                   | -  **Full**                                                                                                                                                                                                                                                                                                                         |
         |                                   |                                                                                                                                                                                                                                                                                                                                     |
         |                                   |    All objects and data in non-system databases are synchronized to the destination database at a time. This mode is applicable to scenarios where service interruption is acceptable.                                                                                                                                              |
         |                                   |                                                                                                                                                                                                                                                                                                                                     |
         |                                   | -  **Incremental**                                                                                                                                                                                                                                                                                                                  |
         |                                   |                                                                                                                                                                                                                                                                                                                                     |
         |                                   |    Through log parsing, incremental data generated on the source database is synchronized to the destination database.                                                                                                                                                                                                              |
         +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Specify EIP                       | This parameter is available when you select **Public network** for **Network Type**. Select an EIP to be bound to the DRS instance. DRS will automatically bind the specified EIP to the DRS instance and unbind the EIP after the task is complete. The number of specified EIPs must be the consistent with that of DB instances. |
         +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   -  DRS instance specifications

      .. table:: **Table 7** Specifications

         +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Parameter      | Description                                                                                                                                                     |
         +================+=================================================================================================================================================================+
         | Specifications | DRS instance specifications. Different specifications have different performance upper limits. For details, see :ref:`Real-Time Synchronization <drs_01_0314>`. |
         +----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+

   -  Tags

      .. table:: **Table 8** Tags

         +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+
         | Parameter                         | Description                                                                                                                                     |
         +===================================+=================================================================================================================================================+
         | Tags                              | -  This setting is optional. Adding tags helps you better identify and manage your tasks. Each task can have up to 20 tags.                     |
         |                                   | -  After a task is created, you can view its tag details on the **Tags** tab. For details, see :ref:`Tag Management <drs_synchronization_tag>`. |
         +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+

   .. note::

      If a task fails to be created, DRS retains the task for three days by default. After three days, the task automatically stops.

#. On the **Configure Source and Destination Databases** page, wait until the synchronization instance is created. Then, specify source and destination database information and click **Test Connection** for both the source and destination databases to check whether they have been connected to the synchronization instance. After the connection tests are successful, select the check box before the agreement and click **Next**.

   Establish the connectivity between the DRS instance and the source and destination databases.

   -  Source database configuration

      .. table:: **Table 9** Source database settings

         +-------------------+-------------------------------------------------------------------------------------------------------+
         | Parameter         | Description                                                                                           |
         +===================+=======================================================================================================+
         | DB Instance Name  | The RDS for PostgreSQL instance you selected when creating the task. The parameter cannot be changed. |
         +-------------------+-------------------------------------------------------------------------------------------------------+
         | Database Username | The username for accessing the source database.                                                       |
         +-------------------+-------------------------------------------------------------------------------------------------------+
         | Database Password | The password for the database username.                                                               |
         +-------------------+-------------------------------------------------------------------------------------------------------+

   -  Destination database configuration

      .. table:: **Table 10** Destination database settings

         +---------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Parameter                 | Description                                                                                                                                                                                                                                                 |
         +===========================+=============================================================================================================================================================================================================================================================+
         | VPC                       | A dedicated virtual network in which the destination database is located. It isolates networks for different services. You can select an existing VPC or create a VPC.                                                                                      |
         +---------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Subnet                    | A subnet provides dedicated network resources that are isolated from other networks, improving network security. The subnet must be in the AZ where the destination database resides. You need to enable DHCP for creating the destination database subnet. |
         +---------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | IP Address or Domain Name | The IP address or domain name of the destination database.                                                                                                                                                                                                  |
         +---------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Port                      | The port of the destination database. Range: 1 - 65535                                                                                                                                                                                                      |
         +---------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Database Username         | The username for accessing the destination database.                                                                                                                                                                                                        |
         +---------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Database Password         | The password for the database username.                                                                                                                                                                                                                     |
         +---------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | SSL Connection            | SSL encrypts the connections between the source and destination databases.                                                                                                                                                                                  |
         +---------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. note::

      The username and password of the source and destination databases are encrypted and stored in the databases and the synchronization instance during the synchronization. After the task is deleted, the username and password are permanently deleted.

#. On the **Set Synchronization Task** page, select the synchronization policy and synchronization object, and click **Next**.

   .. table:: **Table 11** Synchronization Object

      +---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                             | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
      +=======================================+==============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
      | Flow Control                          | You can choose whether to control the flow.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       | -  **Yes**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       |    You can customize the maximum migration speed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       |    In addition, you can set the time range based on your service requirements. The traffic rate setting usually includes setting of a rate limiting time period and a traffic rate value. Flow can be controlled all day or during specific time ranges. The default value is **All day**. A maximum of three time ranges can be set, and they cannot overlap.                                                                                                                                                                                               |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       |    The flow rate must be set based on the service scenario and cannot exceed 9,999 MB/s.                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       | -  **No**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       |    The synchronization speed is not limited and the outbound bandwidth of the source database is maximally used, which will increase the read burden on the source database. For example, if the outbound bandwidth of the source database is 100 MB/s and 80% bandwidth is used, the I/O consumption on the source database is 80 MB/s.                                                                                                                                                                                                                     |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       |    .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       |       -  The flow control mode takes effect only in the full synchronization phase.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                       |       -  You can also change the flow control mode after creating a task. For details, see :ref:`Modifying the Flow Control Mode <drs_10_0401>`.                                                                                                                                                                                                                                                                                                                                                                                                             |
      +---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Incremental Conflict Policy           | The conflict policy refers to the conflict handling policy during incremental synchronization. By default, conflicts in the full synchronization phase are ignored. Select any of the following conflict policies:                                                                                                                                                                                                                                                                                                                                           |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       | -  Ignore                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       |    The system will skip the conflicting data and continue the subsequent synchronization process. If you select **Ignore**, data in the source database may be inconsistent with that in the destination database.                                                                                                                                                                                                                                                                                                                                           |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       | -  Report error                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       |    The synchronization task will be stopped and fail.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       | -  Overwrite                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       |    Conflicting data will be overwritten.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       | If the synchronized data conflicts with the existing data in the destination database, selecting **Ignore** cannot ensure data consistency. To ensure data consistency, select **Overwrite**.                                                                                                                                                                                                                                                                                                                                                                |
      +---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Synchronize                           | Available options: **Normal index**, **Incremental DDLs**, and **Populate materialized views during the full synchronization phase**                                                                                                                                                                                                                                                                                                                                                                                                                         |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       | **Populate materialized views during the full synchronization phase**: This option takes effect only for materialized views that was populated in the source database. This operation affects the full synchronization performance. You perform this operation after the full synchronization is complete.                                                                                                                                                                                                                                                   |
      +---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Synchronize DML                       | Select the DML operations to be synchronized. By default, all DML operations are selected.                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       | If you do not select **Delete**, DELETE statements in the incremental data of the source database will not be synchronized, which may cause a data inconsistency. As a result, there may be a data conflict or the task may fail.                                                                                                                                                                                                                                                                                                                            |
      +---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Source Database Replication Slot Name | You can choose whether to specify the replication slot of the source database. This parameter is available for incremental tasks. After replication slot is enabled, enter the replication slot name. The name can contain a maximum of 63 characters and cannot start with a digit. Only lowercase letters, digits, and underscores (_) are allowed.                                                                                                                                                                                                        |
      +---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Synchronization Object                | The left pane displays the source database objects, and the right pane displays the selected objects. You can select **Tables** or **Databases** for **Synchronization Object** as required.                                                                                                                                                                                                                                                                                                                                                                 |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       | -  Database-level synchronization: In full synchronization, the selected databases and the inventory data of the database objects are synchronized. In incremental synchronization, the DML and some DDL statements of all tables except unlogged tables and temporary tables are synchronized.                                                                                                                                                                                                                                                              |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       | -  Table-level synchronization: In full synchronization, the inventory data of the selected tables, sequences, views, or materialized views is synchronized. In incremental synchronization, the DML and some DDL statements of the selected tables are synchronized.                                                                                                                                                                                                                                                                                        |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       | -  If the synchronization objects in source and destination databases have different names, you can map the source object name to the destination one. For details, see :ref:`Changing Object Names (Mapping Object Names) <drs_10_0015>`.                                                                                                                                                                                                                                                                                                                   |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       |    When a schema name or table name is mapped, to prevent conflicts between indexes and constraint names, the original index name in the table is changed to the following format after synchronization: i_+hash value+original index name (which may be truncated)+_key The hash value is calculated based on the original schema name_original table name_original index name. Similarly, after the synchronization, the original constraint name on the table is changed to c\_ + hash value + original constraint name (which may be truncated) + \_key. |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       | .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       |    -  To quickly select the desired database objects, you can use the search function.                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
      |                                       |    -  If there are changes made to the source databases or objects, click in the upper right corner to update the objects to be synchronized.                                                                                                                                                                                                                                                                                                                                                                                                                |
      |                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                       |    -  If an object name contains spaces, the spaces before and after the object name are not displayed. If there are two or more consecutive spaces in the middle of the object name, only one space is displayed.                                                                                                                                                                                                                                                                                                                                           |
      |                                       |    -  The name of the selected synchronization object cannot contain spaces.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      +---------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

#. On the **Check Task** page, check the synchronization task.

   -  If any check fails, review the cause and rectify the fault. After the fault is rectified, click **Check Again**.
   -  If all check items are successful, click **Next**.

      .. note::

         You can proceed to the next step only when all checks are successful. If there are any items that require confirmation, view and confirm the details first before proceeding to the next step.

#. On the displayed page, specify **Start Time**, confirm that the configured information is correct, and click **Submit** to submit the task.

   .. table:: **Table 12** Task startup settings

      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                 |
      +===================================+=============================================================================================================================================================================================+
      | Start Time                        | Set **Start Time** to **Start upon task creation** or **Start at a specified time** based on site requirements.                                                                             |
      |                                   |                                                                                                                                                                                             |
      |                                   | .. note::                                                                                                                                                                                   |
      |                                   |                                                                                                                                                                                             |
      |                                   |    After a synchronization task is started, the performance of the source and destination databases may be affected. You are advised to start a synchronization task during off-peak hours. |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

#. After the task is submitted, you can view and manage it on the **Data Synchronization Management** page.

   -  You can view the task status. For more information about task status, see :ref:`Task Statuses <drs_06_0004>`.
   -  You can click |image1| in the upper-right corner to view the latest task status.
   -  By default, DRS retains a task in the **Configuration** state for three days. After three days, DRS automatically deletes background resources, but the task status remains unchanged. When you reconfigure the task, DRS applies for resources for the task again.

.. |image1| image:: /_static/images/en-us_image_0000001758549405.png
