:original_name: drs_04_0117.html

.. _drs_04_0117:

From MySQL to MySQL
===================

Supported Source and Destination Databases
------------------------------------------

.. table:: **Table 1** Supported databases

   +-----------------------------------+------------------------------------+
   | Source DB                         | Destination DB                     |
   +===================================+====================================+
   | -  RDS for MySQL                  | -  On-premises MySQL databases     |
   |                                   | -  MySQL databases on an ECS       |
   |                                   | -  MySQL databases on other clouds |
   |                                   | -  RDS for MySQL                   |
   +-----------------------------------+------------------------------------+

Prerequisites
-------------

-  You have logged in to the DRS console.
-  For details about the DB types and versions supported by real-time synchronization, see :ref:`Real-Time Synchronization <drs_01_0302>`.

Suggestions
-----------

.. caution::

   -  When a task is being started or in the full synchronization phase, do not perform DDL operations on the source database. Otherwise, the task may be abnormal.
   -  To keep data consistency before and after the synchronization, ensure that no data is written to the destination database during the synchronization.

-  The success of database synchronization depends on environment and manual operations. To ensure a smooth synchronization, perform a synchronization trial before you start the synchronization to help you detect and resolve problems in advance.

-  Start your synchronization task during off-peak hours. A less active database is easier to synchronize successfully. If the data is fairly static, there is less likely to be any severe performance impacts during the synchronization. If you have to synchronize data during peak hours, you can select **Yes** for **Flow Control** to adjust the synchronization speed.

   -  If network bandwidth is not limited, the query rate of the source database increases by about 50 MB/s during full synchronization, and two to four CPUs are occupied.
   -  To ensure data consistency, tables to be synchronized without a primary key may be locked for 3s.
   -  The data being synchronized may be locked by other transactions for a long period of time, resulting in read timeout.
   -  Due to the inherent characteristics of MySQL, in certain scenarios the performance may be negatively affected. For example, if the CPU resources are insufficient and the storage engine is TokuDB, the read speed on tables may be decreased by 10%.
   -  When DRS concurrently reads data from a database, it will use about 6 to 10 sessions. The impact of the connections on services must be considered.
   -  If you read a table, especially a large table, during the full migration, the exclusive lock on that table may be blocked.

-  Data-Level Comparison

   To obtain accurate comparison results, :ref:`compare data <drs_10_0012>` at a specified time point during off-peak hours. If it is needed, select **Start at a specified time** for **Comparison Time**. Due to slight time difference and continuous operations on data, data inconsistency may occur, reducing the reliability and validity of the comparison results.

-  For many-to-one synchronization tasks that involve the synchronization of the same table, DDL operations cannot be performed on source databases. Otherwise, all synchronization tasks fail.

Precautions
-----------

Before creating a synchronization task, read the following notes:

.. note::

   -  You are advised to create an independent database account for DRS task connection to prevent task failures caused by account modification.
   -  After changing the account passwords for the source or destination databases, :ref:`modify the connection information <drs_10_0016>` in the DRS task as soon as possible to prevent automatic retry after a task failure. Automatic retry will lock the database accounts.

.. table:: **Table 2** Precautions

   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Type                              | Restrictions                                                                                                                                                                                                                                                                                                                                               |
   +===================================+============================================================================================================================================================================================================================================================================================================================================================+
   | Database permissions              | -  The source database user must have the following permissions:                                                                                                                                                                                                                                                                                           |
   |                                   |                                                                                                                                                                                                                                                                                                                                                            |
   |                                   |    SELECT, SHOW VIEW, EVENT, LOCK TABLES, REPLICATION SLAVE, and REPLICATION CLIENT                                                                                                                                                                                                                                                                        |
   |                                   |                                                                                                                                                                                                                                                                                                                                                            |
   |                                   | -  The destination database user must have the following permissions:                                                                                                                                                                                                                                                                                      |
   |                                   |                                                                                                                                                                                                                                                                                                                                                            |
   |                                   |    SELECT, CREATE, INDEX, DROP, DELETE, INSERT, UPDATE, ALTER, CREATE VIEW, CREATE ROUTINE, and REFERENCES. If the destination database version is in the range 8.0.14 to 8.0.18, the SESSION_VARIABLES_ADMIN permission is required.                                                                                                                      |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Synchronization object            | -  Only tables, primary key indexes, unique indexes, common indexes, store procedures, views, and functions can be synchronized.                                                                                                                                                                                                                           |
   |                                   |                                                                                                                                                                                                                                                                                                                                                            |
   |                                   | -  During database mapping, the source database cannot contain stored procedures, views, or functions.                                                                                                                                                                                                                                                     |
   |                                   | -  The databases to be mapped to the destination can only contain tables during synchronization. Otherwise, the synchronization task fails.                                                                                                                                                                                                                |
   |                                   | -  If the database table name contains characters other than letters, digits, and underscores (_), or the mapped database table name contains hyphens (-) and number signs (#), the name length cannot exceed 42 characters.                                                                                                                               |
   |                                   | -  Tables with storage engine different to MyISAM and InnoDB cannot be synchronized.                                                                                                                                                                                                                                                                       |
   |                                   | -  The DDL operation of renaming an unselected table is filtered out during the synchronization. As a result, the task may fail or data may be inconsistent.                                                                                                                                                                                               |
   |                                   |                                                                                                                                                                                                                                                                                                                                                            |
   |                                   |    -  If you rename table A to the name of table B and tables A and B are selected for synchronization, this RENAME statement will not be filtered out.                                                                                                                                                                                                    |
   |                                   |    -  If you rename table A to the name of table B but table B is not synchronized, this RENAME statement will be filtered out.                                                                                                                                                                                                                            |
   |                                   |    -  You are not advised to perform the rename operation in the many-to-one synchronization scenario. Otherwise, the task may fail or data may be inconsistent.                                                                                                                                                                                           |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Source database                   | -  The source database names cannot contain non-ASCII characters, or the following characters: '<`>/\\"                                                                                                                                                                                                                                                    |
   |                                   | -  The source table and view names cannot contain non-ASCII characters, or the following characters: '<>/\\"                                                                                                                                                                                                                                               |
   |                                   | -  The source database name or mapped name cannot start with **ib_logfile** or be **ib_buffer_pool**, **ib_doublewrite**, **ibdata1** or **ibtmp1**.                                                                                                                                                                                                       |
   |                                   | -  During the incremental synchronization, the binlog of the source MySQL database must be enabled and use the row-based format.                                                                                                                                                                                                                           |
   |                                   | -  If the storage space is sufficient, store the source database binlog for as long as possible. The recommended retention period is three days.                                                                                                                                                                                                           |
   |                                   | -  If the **expire_logs_days** value of the source database is set to **0**, the synchronization may fail.                                                                                                                                                                                                                                                 |
   |                                   | -  Enable GTID for the source database. If GTID is not enabled for the source database, primary/standby switchover is not supported. DRS tasks will be interrupted and cannot be restored during a switchover.                                                                                                                                             |
   |                                   | -  During an incremental synchronization, the **server_id** value of the MySQL source database must be set. If the source database version is MySQL 5.6 or earlier, the **server_id** value ranges from **2** to **4294967296**. If the source database is MySQL 5.7 or later, the **server_id** value ranges from **1** to **4294967296**.                |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Destination database              | -  Data cannot be synchronized from a newer version database to an older version database.                                                                                                                                                                                                                                                                 |
   |                                   | -  The destination database must have sufficient disk space.                                                                                                                                                                                                                                                                                               |
   |                                   | -  The character set of the destination database must be the same as that of the source database.                                                                                                                                                                                                                                                          |
   |                                   | -  The time zone of the destination database must be the same as that of the source database.                                                                                                                                                                                                                                                              |
   |                                   | -  If the destination database (excluding MySQL system database) has the same name as the source database, the table structures in the destination database must be consistent with those in the source database.                                                                                                                                          |
   |                                   | -  During a synchronization, a large amount of data is written to the destination database. If the value of the **max_allowed_packet** parameter of the destination database is too small, data cannot be written. You are advised to set the **max_allowed_packet** parameter to a value greater than 100 MB.                                             |
   |                                   | -  If the MyISAM tables are included in the synchronization objects, the **sql_mode** parameter in the destination database cannot contain the **no_engine_substitution** parameter. Otherwise, the synchronization fails.                                                                                                                                 |
   |                                   | -  The source database names mapped to the destination database cannot contain the following characters: dots (.), angle brackets (<>), backslash (\\), and single quotation marks (')                                                                                                                                                                     |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Precautions                       | -  Objects that have dependencies must be synchronized at the same time to avoid synchronization failure. Common dependencies: tables referenced by views, views referenced by views, views and tables referenced by stored procedures/functions/triggers, and tables referenced by primary and foreign keys                                               |
   |                                   | -  Only MySQL to MySQL synchronization supports many-to-one synchronization. During table-level many-to-one synchronization, tables without primary keys cannot exist in the source database.                                                                                                                                                              |
   |                                   | -  If the sources and destinations are RDS instances, database mapping is required.                                                                                                                                                                                                                                                                        |
   |                                   | -  The source and destination databases cannot contain tables that have the same names but do not have primary keys.                                                                                                                                                                                                                                       |
   |                                   | -  If the source and destination DB instances are RDS for MySQL instances, tables encrypted using Transparent Data Encryption (TDE) cannot be synchronized.                                                                                                                                                                                                |
   |                                   | -  If the destination MySQL database does not support TLS 1.2 or is a self-built database of an earlier version (earlier than 5.6.46 or between 5.7 and 5.7.28), you need to submit an O&M application for testing the SSL connection.                                                                                                                     |
   |                                   | -  Resumable upload is supported, but data may be repeatedly inserted into a table that does not have a primary key.                                                                                                                                                                                                                                       |
   |                                   | -  The destination table can contain more columns than the source table. However, the following failures must be avoided:                                                                                                                                                                                                                                  |
   |                                   |                                                                                                                                                                                                                                                                                                                                                            |
   |                                   |    -  Assume that extra columns on the destination cannot be null or have default values. If newly inserted data records are synchronized from the source to the destination, the extra columns will become null, which does not meet the requirements of the destination and will cause the task to fail.                                                 |
   |                                   |    -  Assume that extra columns on the destination must be fixed at a default value and have a unique constraint. If newly inserted data records are synchronized from the source to the destination, the extra columns will contain multiple default values. That does not meet the unique constraint of the destination and will cause the task to fail. |
   |                                   |                                                                                                                                                                                                                                                                                                                                                            |
   |                                   | -  The source database does not support point-in-time recovery (PITR).                                                                                                                                                                                                                                                                                     |
   |                                   | -  The destination database cannot be restored to a point in time when a full synchronization was being performed.                                                                                                                                                                                                                                         |
   |                                   | -  Cascade operations cannot be performed on tables with foreign keys. If the foreign key index of a table is a common index, the table structure may fail to be created. You are advised to use a unique index.                                                                                                                                           |
   |                                   | -  Binlogs cannot be forcibly deleted. Otherwise, the synchronization task fails.                                                                                                                                                                                                                                                                          |
   |                                   | -  The source database does not support the **reset master** or **reset master to** command, which may cause DRS task failures or data inconsistency.                                                                                                                                                                                                      |
   |                                   | -  Set the **expire_log_day** parameter to a proper value to ensure that the binlog does not expire before data transfer resumes. This ensures that services can be recovered after interruption.                                                                                                                                                          |
   |                                   | -  After a task is created, the destination database cannot be set to read-only.                                                                                                                                                                                                                                                                           |
   |                                   | -  A real-time synchronization task may fail due to the change of the username and password of the source or destination database. If it happens, rectify the information and then retry the synchronization task on the DRS console. Generally, you are advised not to modify the preceding information during synchronization.                           |
   |                                   | -  If the source or destination database port is changed during data synchronization, the synchronization task fails. You can rectify the fault as follows:                                                                                                                                                                                                |
   |                                   |                                                                                                                                                                                                                                                                                                                                                            |
   |                                   |    -  If the source database port is wrong, correct the port number on the DRS console and then retry the synchronization task.                                                                                                                                                                                                                            |
   |                                   |                                                                                                                                                                                                                                                                                                                                                            |
   |                                   |    -  If the destination database port is wrong, DRS automatically changes the port to the correct one, and then you need to retry the synchronization task.                                                                                                                                                                                               |
   |                                   |                                                                                                                                                                                                                                                                                                                                                            |
   |                                   |       Generally, do not modify the port number during synchronization.                                                                                                                                                                                                                                                                                     |
   |                                   |                                                                                                                                                                                                                                                                                                                                                            |
   |                                   | -  To ensure data consistency, do not modify the destination database (including but not limited to DDL and DML operations) during synchronization.                                                                                                                                                                                                        |
   |                                   | -  Data inconsistency may occur when the MyISAM table is modified during a full synchronization.                                                                                                                                                                                                                                                           |
   |                                   | -  Incremental synchronization supports table renaming. Ensure that both the source and destination tables are selected.                                                                                                                                                                                                                                   |
   |                                   | -  You can add additional objects during an incremental synchronization.                                                                                                                                                                                                                                                                                   |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Procedure
---------

This section uses synchronization from RDS for MySQL to MySQL as an example to describe how to use DRS to create a real-time synchronization task.

#. On the **Data Synchronization Management** page, click **Create Synchronization Task**.
#. On the **Create Synchronization Instance** page, specify the task name, description, and the synchronization instance details, and click **Next**.

   .. table:: **Table 3** Task information

      +-------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter   | Description                                                                                                                                      |
      +=============+==================================================================================================================================================+
      | Region      | The region where your service is running. You can change the region.                                                                             |
      +-------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
      | Project     | The project corresponds to the current region and can be changed.                                                                                |
      +-------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
      | Task Name   | The task name must start with a letter and consist of 4 to 50 characters. It can contain only letters, digits, hyphens (-), and underscores (_). |
      +-------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
      | Description | The description consists of a maximum of 256 characters and cannot contain special characters ``!=<>'&"\``                                       |
      +-------------+--------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 4** Synchronization instance settings

      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                                                                                                                            |
      +===================================+========================================================================================================================================================================================================================================================================================================================+
      | Data Flow                         | Select **Out of the cloud**. The source database is a database on the current cloud.                                                                                                                                                                                                                                   |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Source DB Engine                  | Select **MySQL**.                                                                                                                                                                                                                                                                                                      |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Destination DB Engine             | Select **MySQL**.                                                                                                                                                                                                                                                                                                      |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Network Type                      | The public network is used as an example.                                                                                                                                                                                                                                                                              |
      |                                   |                                                                                                                                                                                                                                                                                                                        |
      |                                   | Available options: **Public network**, **VPC**, **VPN or Direct Connect**                                                                                                                                                                                                                                              |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Source DB Instance                | The RDS instance you created.                                                                                                                                                                                                                                                                                          |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Synchronization Instance Subnet   | Select the subnet where the synchronization instance is located. You can also click **View Subnet** to go to the network console to view the subnet where the instance resides.                                                                                                                                        |
      |                                   |                                                                                                                                                                                                                                                                                                                        |
      |                                   | By default, the DRS instance and the destination DB instance are in the same subnet. You need to select the subnet where the DRS instance resides and ensure that there are available IP addresses. To ensure that the synchronization instance is successfully created, only subnets with DHCP enabled are displayed. |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Synchronization Mode              | Available options: **Full+Incremental** and **Incremental**                                                                                                                                                                                                                                                            |
      |                                   |                                                                                                                                                                                                                                                                                                                        |
      |                                   | -  **Full+Incremental**                                                                                                                                                                                                                                                                                                |
      |                                   |                                                                                                                                                                                                                                                                                                                        |
      |                                   |    This synchronization mode allows you to synchronize data in real time. After a full synchronization initializes the destination database, an incremental synchronization parses logs to ensure data consistency between the source and destination databases.                                                       |
      |                                   |                                                                                                                                                                                                                                                                                                                        |
      |                                   |    .. note::                                                                                                                                                                                                                                                                                                           |
      |                                   |                                                                                                                                                                                                                                                                                                                        |
      |                                   |       If you select **Full+Incremental**, data generated during the full synchronization will be continuously synchronized to the destination database, and the source remains accessible.                                                                                                                             |
      |                                   |                                                                                                                                                                                                                                                                                                                        |
      |                                   | -  **Incremental**                                                                                                                                                                                                                                                                                                     |
      |                                   |                                                                                                                                                                                                                                                                                                                        |
      |                                   |    Through log parsing, incremental data generated on the source database is synchronized to the destination database.                                                                                                                                                                                                 |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Specifications                    | DRS instance specifications. Different specifications have different performance upper limits. For details, see :ref:`Real-Time Synchronization <drs_01_0314>`.                                                                                                                                                        |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Tags                              | -  This setting is optional. Adding tags helps you better identify and manage your tasks. Each task can have up to 20 tags.                                                                                                                                                                                            |
      |                                   | -  After a task is created, you can view its tag details on the **Tags** tab. For details, see :ref:`Tag Management <drs_synchronization_tag>`.                                                                                                                                                                        |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. note::

      If a task fails to be created, DRS retains the task for three days by default. After three days, the task automatically ends.

#. After the synchronization instance is created, on the **Configure Source and Destination Databases** page, specify source and destination database information. Then, click **Test Connection** for both the source and destination databases to check whether they have been connected to the synchronization instance. After the connection tests are successful, select the check box before the agreement and click **Next**.

   -  Source database information

      .. table:: **Table 5** Source database settings

         +-------------------+------------------------------------------------------------------------------------------------------+
         | Parameter         | Description                                                                                          |
         +===================+======================================================================================================+
         | DB Instance Name  | The RDS DB instance selected during synchronization task creation. This parameter cannot be changed. |
         +-------------------+------------------------------------------------------------------------------------------------------+
         | Database Username | The username for accessing the source database.                                                      |
         +-------------------+------------------------------------------------------------------------------------------------------+
         | Database Password | The password for the database username.                                                              |
         +-------------------+------------------------------------------------------------------------------------------------------+

      .. note::

         The username and password of the source database are encrypted and stored in the database and the synchronization instance during the synchronization. After the task is deleted, the username and password are permanently deleted.

   -  Destination database information

      .. table:: **Table 6** Destination database settings

         +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
         | Parameter                         | Description                                                                                                                       |
         +===================================+===================================================================================================================================+
         | IP Address or Domain Name         | The IP address or domain name of the destination database.                                                                        |
         +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
         | Port                              | The port of the destination database. Range: 1 - 65535                                                                            |
         +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
         | Database Username                 | The username for accessing the destination database.                                                                              |
         +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
         | Database Password                 | The password for the database username.                                                                                           |
         +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
         | SSL Connection                    | SSL encrypts the connections between the source and destination databases. If SSL is enabled, upload the SSL CA root certificate. |
         |                                   |                                                                                                                                   |
         |                                   | This parameter is unavailable when the network type is VPC network and the database type is RDS DB instance.                      |
         |                                   |                                                                                                                                   |
         |                                   | .. note::                                                                                                                         |
         |                                   |                                                                                                                                   |
         |                                   |    -  The maximum size of a single certificate file that can be uploaded is 500 KB.                                               |
         |                                   |    -  If the SSL certificate is not used, your data may be at risk.                                                               |
         +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+

      .. note::

         The IP address, port, username, and password of the destination database are encrypted and stored in the database and the synchronization instance, and will be cleared after the task is deleted.

#. On the **Set Synchronization Task** page, select the conflict policy and synchronization objects, and then click **Next**.

   .. table:: **Table 7** Synchronization mode and object

      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                                                                                                                                                                                 |
      +===================================+=============================================================================================================================================================================================================================================================================================================================================================================+
      | Flow Control                      | You can choose whether to control the flow.                                                                                                                                                                                                                                                                                                                                 |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   | -  **Yes**                                                                                                                                                                                                                                                                                                                                                                  |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |    You can customize the maximum migration speed.                                                                                                                                                                                                                                                                                                                           |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |    In addition, you can set the time range based on your service requirements. The traffic rate setting usually includes setting of a rate limiting time period and a traffic rate value. Flow can be controlled all day or during specific time ranges. The default value is **All day**. A maximum of three time ranges can be set, and they cannot overlap.              |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |    The flow rate must be set based on the service scenario and cannot exceed 9,999 MB/s.                                                                                                                                                                                                                                                                                    |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   | -  **No**                                                                                                                                                                                                                                                                                                                                                                   |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |    The synchronization speed is not limited and the outbound bandwidth of the source database is maximally used, which will increase the read burden on the source database. For example, if the outbound bandwidth of the source database is 100 MB/s and 80% bandwidth is used, the I/O consumption on the source database is 80 MB/s.                                    |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |    .. note::                                                                                                                                                                                                                                                                                                                                                                |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |       -  The flow control mode takes effect only in the full synchronization phase.                                                                                                                                                                                                                                                                                         |
      |                                   |       -  You can also change the flow control mode after creating a task. For details, see :ref:`Modifying the Flow Control Mode <drs_10_0401>`.                                                                                                                                                                                                                            |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Incremental Conflict Policy       | The conflict policy refers to the conflict handling policy during incremental synchronization. By default, conflicts in the full synchronization phase are ignored. Select any of the following conflict policies:                                                                                                                                                          |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   | -  Ignore                                                                                                                                                                                                                                                                                                                                                                   |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |    The system will skip the conflicting data and continue the subsequent synchronization process.                                                                                                                                                                                                                                                                           |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   | -  Report error                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |    The synchronization task will be stopped and fail.                                                                                                                                                                                                                                                                                                                       |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   | -  Overwrite                                                                                                                                                                                                                                                                                                                                                                |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |    Conflicting data will be overwritten.                                                                                                                                                                                                                                                                                                                                    |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   | In the following scenarios, you can select **Ignore** or **Overwrite**. In other scenarios, you are advised to select **Report error**.                                                                                                                                                                                                                                     |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   | -  Data exists in the destination database.                                                                                                                                                                                                                                                                                                                                 |
      |                                   | -  Multiple source databases are synchronized to one destination database.                                                                                                                                                                                                                                                                                                  |
      |                                   | -  Data in the destination database is updated manually.                                                                                                                                                                                                                                                                                                                    |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Filter DROP DATABASE              | During real-time synchronization, executing DDL operations on the source database may affect the synchronization performance. To reduce the risk of synchronization failure, DRS allows you to filter out DDL operations. Currently, only the delete operations on databases can be filtered by default.                                                                    |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   | -  If you select **Yes**, the database deletion operation performed on the source database is not synchronized during data synchronization.                                                                                                                                                                                                                                 |
      |                                   | -  If you select **No**, related operations are synchronized to the destination database during data synchronization.                                                                                                                                                                                                                                                       |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Synchronize                       | Normal indexes and incremental DDLs can be synchronized. You can determine whether to synchronize normal indexes and DDLs based on service requirements.                                                                                                                                                                                                                    |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Online DDL                        | If table-level synchronization is selected, you can choose whether to synchronize Online DDL. By default, Online DDL is not synchronized.                                                                                                                                                                                                                                   |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   | -  **Yes**: Table-level synchronization supports Online DDL synchronization. You can select three Online DDL tools including PT-OSC, GH-OST, and DMS. The regular expressions can be configured for shadow tables and useless tables in PT-OSC and GH-OST. (Default values are provided. You are advised not to change the regular expressions unless otherwise specified.) |
      |                                   | -  **No**: Table-level synchronization does not support Online DDL synchronization.                                                                                                                                                                                                                                                                                         |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Synchronization Object            | Select **Tables**, **Import object file**, or **Databases** as required.                                                                                                                                                                                                                                                                                                    |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   | -  If the synchronization objects in source and destination databases have different names, you can map the source object name to the destination one. For details, see :ref:`Changing Object Names (Mapping Object Names) <drs_10_0015>`.                                                                                                                                  |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |    If the database table name contains characters other than letters, digits, and underscores (_), or the mapped database table name contains hyphens (-) and number signs (#), the name length cannot exceed 42 characters.                                                                                                                                                |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   | -  For details about how to import an object file, see :ref:`Importing Synchronization Objects <drs_10_0402>`.                                                                                                                                                                                                                                                              |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   | .. note::                                                                                                                                                                                                                                                                                                                                                                   |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |    -  You can search for table names to quickly select the required database objects.                                                                                                                                                                                                                                                                                       |
      |                                   |    -  If there are changes made to the source databases or objects, click in the upper right corner to update the objects to be synchronized.                                                                                                                                                                                                                               |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                             |
      |                                   |    -  If an object name contains spaces, the spaces before and after the object name are not displayed. If there are two or more consecutive spaces in the middle of the object name, only one space is displayed.                                                                                                                                                          |
      |                                   |    -  The name of the selected synchronization object cannot contain spaces.                                                                                                                                                                                                                                                                                                |
      +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

#. On the **Check Task** page, check the synchronization task.

   -  If any check fails, review the cause and rectify the fault. After the fault is rectified, click **Check Again**.
   -  If all check items are successful, click **Next**.

      .. note::

         You can proceed to the next step only when all checks are successful. If there are any items that require confirmation, view and confirm the details first before proceeding to the next step.

#. On the **Confirm Task** page, specify **Start Time**, confirm that the configured information is correct, and click **Submit** to submit the task.

   .. table:: **Table 8** Task startup settings

      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                 |
      +===================================+=============================================================================================================================================================================================+
      | Started Time                      | Set **Start Time** to **Start upon task creation** or **Start at a specified time** based on site requirements.                                                                             |
      |                                   |                                                                                                                                                                                             |
      |                                   | .. note::                                                                                                                                                                                   |
      |                                   |                                                                                                                                                                                             |
      |                                   |    After a synchronization task is started, the performance of the source and destination databases may be affected. You are advised to start a synchronization task during off-peak hours. |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

#. After the task is submitted, you can view and manage it on the **Data Synchronization Management** page.

   -  You can view the task status. For more information about task status, see :ref:`Task Statuses <drs_06_0004>`.
   -  You can click |image1| in the upper-right corner to view the latest task status.
   -  By default, DRS retains a task in the **Configuration** state for three days. After three days, DRS automatically deletes background resources, but the task status remains unchanged. When you reconfigure the task, DRS applies for resources for the task again.

.. |image1| image:: /_static/images/en-us_image_0000001758549405.png
