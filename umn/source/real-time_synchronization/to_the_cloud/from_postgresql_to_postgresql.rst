:original_name: drs_04_0107.html

.. _drs_04_0107:

From PostgreSQL to PostgreSQL
=============================

Supported Source and Destination Databases
------------------------------------------

.. table:: **Table 1** Supported databases

   +---------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------+
   | Source DB                                                                 | Destination DB                                                                                                  |
   +===========================================================================+=================================================================================================================+
   | -  On-premises database (PostgreSQL 9.4, 9.5, 9.6, 10, 11, 12, 13 and 14) | RDS for PostgreSQL (9.5, 9.6, 10, 11, 12, 13 and 14)                                                            |
   | -  ECS database (PostgreSQL 9.4, 9.5, 9.6, 10, 11, 12, 13 and 14)         |                                                                                                                 |
   | -  Other cloud database (PostgreSQL 9.4, 9.5, 9.6, 10, 11, 12, 13 and 14) | .. note::                                                                                                       |
   | -  RDS for PostgreSQL (9.5, 9.6, 10, 11, 12, 13 and 14)                   |                                                                                                                 |
   |                                                                           |    The major version of the destination database must be the same as or later than that of the source database. |
   +---------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------+

Supported Synchronization Objects
---------------------------------

:ref:`Table 2 <drs_04_0107__table9915155511407>` lists the objects that can be synchronized in different scenarios. DRS will automatically check the objects you selected before the synchronization.

.. _drs_04_0107__table9915155511407:

.. table:: **Table 2** Supported synchronization objects

   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Type                              | Notes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   +===================================+==========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | Objects                           | -  **Instance-level synchronization is not supported.** Only one database can be synchronized at a time. Multiple DRS tasks are required to synchronize multiple databases.                                                                                                                                                                                                                                                                                                                                                              |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   | -  **Supported field types:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |    Digit, currency, character, binary, date/time, boolean, enumeration, geometry, network address, bit, text search, UUID, XML, JSON, array, compound, and range.                                                                                                                                                                                                                                                                                                                                                                        |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   | -  **Scope of full synchronization**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |    -  Schema, table, index, constraint, view, materialized view, sequence, stored procedure, rule, trigger, foreign key, sorting rule, plug-in, code conversion information, aggregate function, operator, statistics extension, conversion information, text search configuration, function, data type, type conversion, user, and event trigger, text search parsers, and text search templates                                                                                                                                        |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |       During the table-level synchronization, only tables, views, materialized views, sequences, and users can be synchronized.                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |    -  Objects that are not supported: system schemas (schemas starting with ``pg_``, information_schema, sys, utl_raw, dbms_lob, dbms_output, and dbms_random), system catalogs, system users, tablespaces, foreign-data wrappers, foreign servers, user mappings, publications, and subscriptions                                                                                                                                                                                                                                       |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |    .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |       The restrictions on the objects that can be synchronized are as follows:                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |       -  Object name: The database name cannot contain +" %?\\<>, the schema name and table name cannot contain ".'<>, and the column name cannot contain double quotation marks (") and single quotation marks (').                                                                                                                                                                                                                                                                                                                     |
   |                                   |       -  Table: Temporary tables are not synchronized. During table-level synchronization, table constraints, indexes, and rules are synchronized, except for table triggers.                                                                                                                                                                                                                                                                                                                                                            |
   |                                   |       -  Schema: Permissions of the public schema are not synchronized. During table-level synchronization, the permissions of existing schemas in the destination database are synchronized.                                                                                                                                                                                                                                                                                                                                            |
   |                                   |       -  Function: Do not synchronize C language functions or functions with the leakproof or support attribute.                                                                                                                                                                                                                                                                                                                                                                                                                         |
   |                                   |       -  Plug-in: The metadata of plug-ins is not synchronized.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |       -  Data type: Basic data types are not synchronized.                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   |                                   |       -  Type conversion: The binary coercion type cannot be converted.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   |                                   |       -  Event trigger: Event triggers can be synchronized only when the destination database version is RDS for PostgreSQL 11.11 or later.                                                                                                                                                                                                                                                                                                                                                                                              |
   |                                   |       -  Text search parser: Text search parsers can be synchronized only when the destination database version is RDS for PostgreSQL 11.11 or later.                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                   |       -  Text search template: Text search templates can be synchronized only when the destination database version is RDS for PostgreSQL 11.11 or later.                                                                                                                                                                                                                                                                                                                                                                                |
   |                                   |       -  User: Existing users in the destination database, superuser, replication, and bypassrls attributes of users, and member relationships of superuser users are not synchronized. If the object owner or grantor is superuser, its owner or grantor is not synchronized. If the destination database is RDS for PostgreSQL DB instance, the password of the user to be synchronized cannot contain the username. During table-level synchronization, the default access permissions of source database users are not synchronized. |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   | -  **Scope of incremental synchronization**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |    -  Some DML statements, including INSERT, UPDATE, and DELETE, can be synchronized.                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |    -  Some DDL operations can be synchronized, including TRUNCATE, CREATE SCHEMA, CREATE TABLE, DROP TABLE, ALTER TABLE (including ADD COLUMN, DROP COLUMN, ALTER COLUMN, RENAME COLUMN, ADD CONSTRAINT, DROP CONSTRAINT and RENAME), CREATE SEQUENCE, DROP SEQUENCE, ALTER SEQUENCE, CREATE INDEX, ALTER INDEX, DROP INDEX, CREATE VIEW, and ALTER VIEW.                                                                                                                                                                                |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |       During table-level synchronization, only the following DDL operations can be synchronized: TRUNCATE, DROP TABLE, and ALTER TABLE (ADD COLUMN, DROP COLUMN, ALTER COLUMN, RENAME COLUMN, ADD CONSTRAINT, DROP CONSTRAINT and RENAME)                                                                                                                                                                                                                                                                                                |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |    -  Not synchronized: DML statements of unlogged tables and temporary tables                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |       .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |          The source database captures DDL statements using event triggers and records them in specific tables, so you need to create event triggers and functions in the source database in advance. For details, see :ref:`Creating Triggers and Functions to Implement Incremental DDL Synchronization for PostgreSQL <drs_03_0088>`.                                                                                                                                                                                                  |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Database Account Permission Requirements
----------------------------------------

To start a synchronization task, the source and destination database users must meet the requirements in the following table. Different types of synchronization tasks require different permissions. For details, see :ref:`Table 3 <drs_04_0107__table68938710614>`. DRS automatically checks the database account permissions in the pre-check phase and provides handling suggestions.

.. _drs_04_0107__table68938710614:

.. table:: **Table 3** Database account permission

   +---------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Type                      | Full                                                                                                                                                                                                                                                               | Full+Incremental                                                                                                                                                                                                                                                                                                                                                                                            |
   +===========================+====================================================================================================================================================================================================================================================================+=============================================================================================================================================================================================================================================================================================================================================================================================================+
   | Source database user      | The CONNECT permission for databases, the USAGE permission for schemas, the SELECT permission for tables, the SELECT permission for sequences, and the SELECT permission for system table **catalog pg_catalog.pg_authid** (used for synchronizing user passwords) | The CONNECT permission for databases, the USAGE permission for schemas, the SELECT permission for tables, the SELECT permission for sequences, the SELECT permission for system table **catalog pg_catalog.pg_authid** (used for synchronizing user passwords), the UPDATE, DELETE, and TRUNCATE permissions for tables that do not have primary keys, and the permission to create replication connections |
   |                           |                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                           |                                                                                                                                                                                                                                                                    | .. note::                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                           |                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                           |                                                                                                                                                                                                                                                                    |    -  The UPDATE, DELETE, and TRUNCATE permissions for tables that do not have primary keys are only used to temporarily lock tables to ensure data consistency after the migration.                                                                                                                                                                                                                        |
   |                           |                                                                                                                                                                                                                                                                    |    -  To add the permission to create replication connections, perform the following steps:                                                                                                                                                                                                                                                                                                                 |
   |                           |                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                           |                                                                                                                                                                                                                                                                    |       #. Add **host replication <src_user_name> <drs_instance_ip>/32 md5** before all configurations in the **pg_hba.conf** file of the source database.                                                                                                                                                                                                                                                    |
   |                           |                                                                                                                                                                                                                                                                    |       #. Run **select pg_reload_conf();** in the source database as user SUPERUSER, or restart the DB instance to apply the changes.                                                                                                                                                                                                                                                                        |
   +---------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Destination database user | -  **Database-level**: The CREATEDB permission is required.                                                                                                                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                           | -  **Table-level**:                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                           |                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                           |    -  To synchronize databases, the CREATEDB permission is required.                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                           |    -  To synchronize a schema, the CONNECT and CREATE permissions for the database that contains the schema are required.                                                                                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                           |    -  To synchronize objects in a schema, the CONNECT permission for the database that contains the schema, and the USAGE and CREATE permissions for the schema that contain the object are required.                                                              |                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                           |                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                           | -  Synchronization user: The CREATEROLE permission is required.                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                           | -  Synchronization user permissions: The default privilege cannot be modified. Otherwise, the object permissions of the destination database may be inconsistent with those of the source database.                                                                |                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                           |                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                           | .. note::                                                                                                                                                                                                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                           |                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                           |    To synchronize event triggers, text search parsers, and text search templates, the destination database version must be RDS for PostgreSQL 11.11 or later, and the destination database user must be user root or a member of user root.                        |                                                                                                                                                                                                                                                                                                                                                                                                             |
   +---------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _drs_04_0107__section1113413054519:

Suggestions
-----------

.. caution::

   -  When a task is being started or in the full synchronization phase, do not perform DDL operations on the source database. Otherwise, the task may be abnormal.
   -  To keep data consistency before and after the synchronization, ensure that no data is written to the destination database during the synchronization.

-  The success of database synchronization depends on environment and manual operations. To ensure a smooth synchronization, perform a synchronization trial before you start the synchronization to help you detect and resolve problems in advance.

-  Start your synchronization task during off-peak hours. A less active database is easier to synchronize successfully. If the data is fairly static, there is less likely to be any severe performance impacts during the synchronization.

   -  If network bandwidth is not limited, the query rate of the source database increases by about 50 MB/s during full synchronization, and two to four CPUs are occupied.
   -  To ensure data consistency, tables to be synchronized without a primary key may be locked for 3s.
   -  The data being synchronized may be locked by other transactions for a long period of time, resulting in read timeout.
   -  When DRS concurrently reads data from a database, it will use about 6 to 10 sessions. The impact of the connections on services must be considered.
   -  If you read a table, especially a large table, during the full migration, the exclusive lock on that table may be blocked.

-  Data-Level Comparison

   To obtain accurate comparison results, start data comparison at a specified time point during off-peak hours. If it is needed, select **Start at a specified time** for **Comparison Time**. Due to slight time difference and continuous operations on data, data inconsistency may occur, reducing the reliability and validity of the comparison results.

.. _drs_04_0107__section98341051155812:

Precautions
-----------

The full+incremental synchronization process consists of four phases: task startup, full synchronization, incremental synchronization, and task completion. (A single incremental synchronization task or a single full synchronization task contains three phases.) To ensure smooth synchronization, read the following notes before creating a synchronization task.

.. table:: **Table 4** Precautions

   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Type                              | Constraints                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   +===================================+======================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | Starting a task                   | -  **Source database requirements:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  The partition table trigger of the source database cannot be set to **disable**.                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  For a full synchronization task, the source database can be a standby database, but **hot_standby_feedback** must be set to **on**. For an incremental synchronization task, the source database cannot be a standby database.                                                                                                                                                                                                                                                                                                 |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  To perform incremental synchronization:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       The **pg_hba.conf** file of the source database contains the following configuration:                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       .. code-block::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |          host replication all 0.0.0.0/0 md5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       The **wal_level** value of the source database must be **logical**.                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       The **test_decoding** plug-in has been installed on the source database.                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       The replica identity attribute of tables that do not have primary keys in the source database must be full.                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       The **max_replication_slots** value of the source database must be greater than the number of used replication slots.                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       The **max_wal_senders** value of the source database must be greater than or equal to the **max_replication_slots** value.                                                                                                                                                                                                                                                                                                                                                                                                     |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       If the toast attribute of the primary key column in the source database is main, external, or extended, the replica identity attribute must be full.                                                                                                                                                                                                                                                                                                                                                                           |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   | -  **Source database object requirements:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  Triggers with the same name cannot exist in the source database.                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   |                                   |    -  The objects that have dependencies must be synchronized at the same time. Otherwise, the synchronization may fail.                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   | -  **Destination database parameter requirements:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  The **block_size** value of the destination database must be greater than or equal to that of the source database.                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |    -  The **lc_monetary** values of the source and destination databases must be the same.                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                                   |    -  To perform incremental synchronization, if the synchronization object contains foreign keys, triggers, or event triggers, set **session_replication_role** of the destination database to **replica**. After the synchronization is complete, change the value to **origin**.                                                                                                                                                                                                                                                  |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   | -  **Destination database object requirements:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  The destination database cannot contain objects with the same type and name as the objects to be synchronized, including databases, schemas, and tables. System databases, system schemas, and system tables are excluded.                                                                                                                                                                                                                                                                                                     |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   | -  **Other notes:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  When a schema name or table name is mapped, to prevent conflicts between indexes and constraint names, the original index name in the table is changed to the following format after synchronization: i_+hash value+original index name (which may be truncated)+_key The hash value is calculated based on the original schema name_original table name_original index name. Similarly, the original constraint name on the table is changed to c\_ + hash value + original constraint name (which may be truncated) + \_key. |
   |                                   |    -  Before starting a full+incremental or incremental synchronization task, ensure that no long transaction is started in the source database. Starting the long transaction will block the creation of the logical replication slot and cause the task to fail.                                                                                                                                                                                                                                                                   |
   |                                   |    -  For a full+incremental or incremental synchronization task, if an internal error occurs during the pre-check and the task stops before it is started, check and delete the streaming replication slot by referring to :ref:`Forcibly Stopping Synchronization of PostgreSQL <drs_12_0009>` to avoid residual streaming replication slots in the source database.                                                                                                                                                               |
   |                                   |    -  If you choose to synchronize DDL statements, ensure that the DDL statements executed on the source database are compatible with the destination database.                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |       .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |          DDL statements are captured using event triggers in the source database, recorded in a specific table, and then synchronized to the destination database. You need to create event triggers and functions in the source database before starting a task. For details, see :ref:`Creating Triggers and Functions to Implement Incremental DDL Synchronization for PostgreSQL <drs_03_0088>`.                                                                                                                                 |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Full synchronization              | -  Do not change the port of the source and destination databases, or change or delete the passwords and permissions of the source and destination database users. Otherwise, the task may fail.                                                                                                                                                                                                                                                                                                                                     |
   |                                   | -  Do not run any DDL statement in the source database. Otherwise, data may be inconsistent or the task may fail.                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                   | -  Do not write data to the destination database. Otherwise, data may be inconsistent.                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Incremental synchronization       | -  Do not change the port of the source and destination databases, or change or delete the passwords and permissions of the source and destination database users. Otherwise, the task may fail.                                                                                                                                                                                                                                                                                                                                     |
   |                                   | -  Do not change the primary key or unique key (if the primary key does not exist) of the source database table. Otherwise, incremental data may be inconsistent or the task may fail.                                                                                                                                                                                                                                                                                                                                               |
   |                                   | -  Do not modify the replica identity attribute of tables in the source database. Otherwise, incremental data may be inconsistent or the task may fail.                                                                                                                                                                                                                                                                                                                                                                              |
   |                                   | -  Do not write data to the destination database. Otherwise, data may be inconsistent.                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   |                                   | -  During database-level synchronization, if a table without a primary key is added to the source database, you must set **replica identity** of the table to **full** before writing data. Otherwise, data may be inconsistent or the task may fail.                                                                                                                                                                                                                                                                                |
   |                                   | -  During database-level synchronization, if a primary key table is added to the source database and the toast attribute of the primary key column is main, external, or extended, the replica identity attribute of the table must be set to full before writing data. Otherwise, data may be inconsistent or the task may fail.                                                                                                                                                                                                    |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Synchronization comparison        | -  You are advised to compare data in the source database during off-peak hours to prevent inconsistent data from being falsely reported and reduce the impact on the source database and DRS tasks.                                                                                                                                                                                                                                                                                                                                 |
   |                                   | -  During incremental synchronization, if data is written to the source database, the comparison results may be inconsistent.                                                                                                                                                                                                                                                                                                                                                                                                        |
   |                                   | -  Data cannot be compared during full synchronization.                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
   |                                   | -  Do not limit the synchronization speed during data comparison.                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Stopping a task                   | -  **Stop a task normally:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  The destination database sequence value is automatically reset. The auto-increment sequence value is the source database sequence value plus the security margin, and the auto-decrement sequence value is the source database sequence value minus the security margin. The default security margin is 10,000. If users are synchronized, the user memberships are automatically synchronized after the task is complete.                                                                                                     |
   |                                   |    -  When a full+incremental synchronization task is complete, the streaming replication slot created by the task in the source database is automatically deleted.                                                                                                                                                                                                                                                                                                                                                                  |
   |                                   |    -  If the value of destination database **session_replication_role** is **replica** when the full+incremental synchronization task is complete, change the value to **origin**.                                                                                                                                                                                                                                                                                                                                                   |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   | -  **Forcibly stop a task:**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                   |    -  You need to manually update the sequence value in the destination database. For details, see :ref:`Forcibly Stopping Synchronization of PostgreSQL <drs_12_0009>`.                                                                                                                                                                                                                                                                                                                                                             |
   |                                   |    -  To forcibly stop a full+incremental real-time synchronization task, you need to manually delete the replication slots that may remain in the source database. For details, see :ref:`Forcibly Stopping Synchronization of PostgreSQL <drs_12_0009>`.                                                                                                                                                                                                                                                                           |
   |                                   |    -  If the value of destination database **session_replication_role** is **replica**, change it to **origin** to forcibly stop the full+incremental synchronization task.                                                                                                                                                                                                                                                                                                                                                          |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Prerequisites
-------------

-  You have logged in to the DRS console.
-  For details about the DB types and versions supported by real-time synchronization, see :ref:`Real-Time Synchronization <drs_01_0302>`.
-  You have read :ref:`Suggestions <drs_04_0107__section1113413054519>` and :ref:`Precautions <drs_04_0107__section98341051155812>`.

Procedure
---------

This section uses synchronization from PostgreSQL to PostgreSQL as an example to describe how to configure a real-time synchronization task in the VPC network scenario.

#. On the **Data Synchronization Management** page, click **Create Synchronization Task**.

#. On the **Create Synchronization Instance** page, specify the task name, description, and the synchronization instance details, and click **Next**.

   .. table:: **Table 5** Task and recipient description

      +-------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter   | Description                                                                                                                                      |
      +=============+==================================================================================================================================================+
      | Region      | The region where the synchronization instance is deployed. You can change the region.                                                            |
      +-------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
      | Project     | The project corresponds to the current region and can be changed.                                                                                |
      +-------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
      | Task Name   | The task name must start with a letter and consist of 4 to 50 characters. It can contain only letters, digits, hyphens (-), and underscores (_). |
      +-------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
      | Description | The description consists of a maximum of 256 characters and cannot contain special characters ``!=<>'&"\``                                       |
      +-------------+--------------------------------------------------------------------------------------------------------------------------------------------------+

   .. table:: **Table 6** Synchronization instance settings

      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                                                                                                                            |
      +===================================+========================================================================================================================================================================================================================================================================================================================+
      | Data Flow                         | Select **To the cloud**.                                                                                                                                                                                                                                                                                               |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Source DB Engine                  | Select **PostgreSQL**.                                                                                                                                                                                                                                                                                                 |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Destination DB Engine             | Select **PostgreSQL**.                                                                                                                                                                                                                                                                                                 |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Network Type                      | Available options: **VPC**, **Public network** and **VPN or Direct Connect**. **VPC** is used as an example.                                                                                                                                                                                                           |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Destination DB Instance           | The RDS PostgreSQL DB instance.                                                                                                                                                                                                                                                                                        |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Synchronization Instance Subnet   | Select the subnet where the synchronization instance is located. You can also click **View Subnet** to go to the network console to view the subnet where the instance resides.                                                                                                                                        |
      |                                   |                                                                                                                                                                                                                                                                                                                        |
      |                                   | By default, the DRS instance and the destination DB instance are in the same subnet. You need to select the subnet where the DRS instance resides and ensure that there are available IP addresses. To ensure that the synchronization instance is successfully created, only subnets with DHCP enabled are displayed. |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Synchronization Mode              | -  **Full+Incremental**                                                                                                                                                                                                                                                                                                |
      |                                   |                                                                                                                                                                                                                                                                                                                        |
      |                                   |    This synchronization mode allows you to synchronize data in real time. After a full synchronization initializes the destination database, an incremental synchronization parses logs to ensure data consistency between the source and destination databases.                                                       |
      |                                   |                                                                                                                                                                                                                                                                                                                        |
      |                                   | -  **Full**                                                                                                                                                                                                                                                                                                            |
      |                                   |                                                                                                                                                                                                                                                                                                                        |
      |                                   |    All objects and data in non-system databases are synchronized to the destination database at a time. This mode is applicable to scenarios where service interruption is acceptable.                                                                                                                                 |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Tags                              | -  This setting is optional. Adding tags helps you better identify and manage your tasks. Each task can have up to 20 tags.                                                                                                                                                                                            |
      |                                   | -  After a task is created, you can view its tag details on the **Tags** tab. For details, see :ref:`Tag Management <drs_synchronization_tag>`.                                                                                                                                                                        |
      +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. note::

      If a task fails to be created, DRS retains the task for three days by default. After three days, the task automatically ends.

#. On the **Configure Source and Destination Databases** page, wait until the synchronization instance is created. Then, specify source and destination database information and click **Test Connection** for both the source and destination databases to check whether they have been connected to the synchronization instance. After the connection tests are successful, select the check box before the agreement and click **Next**.

   Establish the connectivity between the DRS instance and the source and destination databases.

   -  **Network connectivity:** Ensure that the source and destination databases accept connections from the IP address of the DRS instance. To access databases over a public network, configure the database to accept connections from the EIP of the DRS instance. To access databases over a VPC, VPN, or Direct Connect network, configure the database to accept connections from the private IP address of the DRS instance.
   -  **Account connectivity:** Ensure that the source and destination databases allows connections from the DRS instance using the username and password.

   .. note::

      The source database can be an ECS database or an RDS instance. Configure parameters based on the database type.

   -  Scenario 1: Databases on an ECS - source database configuration

      .. table:: **Table 7** Self-build on ECS - source database information

         +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Parameter                         | Description                                                                                                                                                                                                                                       |
         +===================================+===================================================================================================================================================================================================================================================+
         | Source Database Type              | Select **Self-built on ECS**.                                                                                                                                                                                                                     |
         +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | VPC                               | A dedicated virtual network in which the source database is located. It isolates networks for different services. You can select an existing VPC or create a VPC.                                                                                 |
         +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Subnet                            | A subnet provides dedicated network resources that are isolated from other networks, improving network security. The subnet must be in the AZ where the source database resides. You need to enable DHCP for creating the source database subnet. |
         +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | IP Address or Domain Name         | The IP address or domain name of the source database.                                                                                                                                                                                             |
         +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Port                              | The port of the source database. Range: 1 - 65535                                                                                                                                                                                                 |
         +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Database Name                     | Indicates whether to specify a database. If this option is enabled, enter the database name.                                                                                                                                                      |
         +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Database Username                 | The username for accessing the source database.                                                                                                                                                                                                   |
         +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Database Password                 | The password for the database username.                                                                                                                                                                                                           |
         +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | SSL Connection                    | SSL encrypts the connections between the source and destination databases. If SSL is enabled, upload the SSL CA root certificate.                                                                                                                 |
         |                                   |                                                                                                                                                                                                                                                   |
         |                                   | .. note::                                                                                                                                                                                                                                         |
         |                                   |                                                                                                                                                                                                                                                   |
         |                                   |    -  The maximum size of a single certificate file that can be uploaded is 500 KB.                                                                                                                                                               |
         |                                   |    -  If SSL is disabled, your data may be at risk.                                                                                                                                                                                               |
         +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

      .. note::

         The IP address, domain name, username, and password of the source database are encrypted and stored in DRS, and will be cleared after the task is deleted.

   -  Scenario 2: RDS DB instance - source database configuration

      .. table:: **Table 8** RDS DB instance - source database information

         +----------------------+----------------------------------------------------------------------------------+
         | Parameter            | Description                                                                      |
         +======================+==================================================================================+
         | Source Database Type | Select an RDS DB instance.                                                       |
         +----------------------+----------------------------------------------------------------------------------+
         | DB Instance Name     | Select the RDS PostgreSQL instance to be synchronized as the source DB instance. |
         +----------------------+----------------------------------------------------------------------------------+
         | Database Username    | The username for accessing the source database.                                  |
         +----------------------+----------------------------------------------------------------------------------+
         | Database Password    | The password for the database username.                                          |
         +----------------------+----------------------------------------------------------------------------------+

   .. table:: **Table 9** Destination database settings

      +-------------------+--------------------------------------------------------------------------------------------------+
      | Parameter         | Description                                                                                      |
      +===================+==================================================================================================+
      | DB Instance Name  | The RDS PostgreSQL instance you selected when creating the migration task and cannot be changed. |
      +-------------------+--------------------------------------------------------------------------------------------------+
      | Database Username | The username for accessing the destination database.                                             |
      +-------------------+--------------------------------------------------------------------------------------------------+
      | Database Password | The password for the database username.                                                          |
      +-------------------+--------------------------------------------------------------------------------------------------+

   .. note::

      The username and password of the source and destination databases are encrypted and stored in the databases and the synchronization instance during the synchronization. After the task is deleted, the username and password are permanently deleted.

#. On the **Set Synchronization Task** page, select the synchronization objects and accounts and click **Next**.

   .. table:: **Table 10** Synchronization Object

      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
      +===================================+==============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
      | Flow Control                      | You can choose whether to control the flow.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   | -  **Yes**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |    You can customize the maximum migration speed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |    In addition, you can set the time range based on your service requirements. The traffic rate setting usually includes setting of a rate limiting time period and a traffic rate value. Flow can be controlled all day or during specific time ranges. The default value is **All day**. A maximum of three time ranges can be set, and they cannot overlap.                                                                                                                                                                                               |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |    The flow rate must be set based on the service scenario and cannot exceed 9,999 MB/s.                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   | -  **No**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |    The synchronization speed is not limited and the outbound bandwidth of the source database is maximally used, which will increase the read burden on the source database. For example, if the outbound bandwidth of the source database is 100 MB/s and 80% bandwidth is used, the I/O consumption on the source database is 80 MB/s.                                                                                                                                                                                                                     |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |    .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |       -  The flow control mode takes effect only in the full synchronization phase.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
      |                                   |       -  You can also change the flow control mode after creating a task. For details, see :ref:`Modifying the Flow Control Mode <drs_10_0401>`.                                                                                                                                                                                                                                                                                                                                                                                                             |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Incremental Conflict Policy       | The conflict policy refers to the conflict handling policy during incremental synchronization. By default, conflicts in the full synchronization phase are ignored. Select any of the following conflict policies:                                                                                                                                                                                                                                                                                                                                           |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   | -  Ignore                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |    The system will skip the conflicting data and continue the subsequent synchronization process.                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   | -  Report error                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |    The synchronization task will be stopped and fail.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   | -  Overwrite                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |    Conflicting data will be overwritten.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Synchronize                       | Available options: **Index**, **Incremental DDLs**, and **Populate materialized views during the full synchronization phase**                                                                                                                                                                                                                                                                                                                                                                                                                                |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   | **Populate materialized views during the full synchronization phase**: This option takes effect only for materialized views that was populated in the source database. This operation affects the full synchronization performance. You perform this operation after the full synchronization is complete.                                                                                                                                                                                                                                                   |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Synchronization Object            | Select **Tables** or **Databases** as required.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   | -  Database-level synchronization: In full synchronization, the selected databases and the inventory data of the database objects are synchronized. In incremental synchronization, the DML and some DDL statements of all tables except unlogged tables and temporary tables are synchronized.                                                                                                                                                                                                                                                              |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   | -  Table-level synchronization: In full synchronization, the inventory data of the selected tables, sequences, views, or materialized views is synchronized. In incremental synchronization, the DML and some DDL statements of the selected tables are synchronized.                                                                                                                                                                                                                                                                                        |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   | -  If the synchronization objects in source and destination databases have different names, you can map the source object name to the destination one. For details, see :ref:`Mapping Object Names <drs_10_0015>`.                                                                                                                                                                                                                                                                                                                                           |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |    When a schema name or table name is mapped, to prevent conflicts between indexes and constraint names, the original index name in the table is changed to the following format after synchronization: i_+hash value+original index name (which may be truncated)+_key The hash value is calculated based on the original schema name_original table name_original index name. Similarly, after the synchronization, the original constraint name on the table is changed to c\_ + hash value + original constraint name (which may be truncated) + \_key. |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   | .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |    -  To quickly select the desired database objects, you can use the search function.                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
      |                                   |    -  If there are changes made to the source databases or objects, click in the upper right corner to update the objects to be synchronized.                                                                                                                                                                                                                                                                                                                                                                                                                |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   |    -  If the object name contains spaces, the spaces before and after the object name are not displayed. If there are multiple spaces between the object name and the object name, only one space is displayed.                                                                                                                                                                                                                                                                                                                                              |
      |                                   |    -  The name of the selected synchronization object cannot contain spaces.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Synchronize Account               | During the synchronization, you can synchronize accounts based on your service requirements.                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
      |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
      |                                   | There are two types of accounts: accounts that can be synchronized and accounts that cannot be synchronized. For accounts that cannot be synchronized, you can view details in the **Remarks** column and determine whether to synchronize accounts and permissions based on your service requirements.                                                                                                                                                                                                                                                      |
      +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

#. On the **Check Task** page, check the synchronization task.

   -  If any check fails, review the cause and rectify the fault. After the fault is rectified, click **Check Again**.
   -  If all check items are successful, click **Next**.

      .. note::

         You can proceed to the next step only when all checks are successful. If there are any items that require confirmation, view and confirm the details first before proceeding to the next step.

#. On the displayed page, specify **Start Time**, confirm that the configured information is correct, and click **Submit** to submit the task.

   .. table:: **Table 11** Task startup settings

      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                 |
      +===================================+=============================================================================================================================================================================================+
      | Started Time                      | Set **Start Time** to **Start upon task creation** or **Start at a specified time** based on site requirements.                                                                             |
      |                                   |                                                                                                                                                                                             |
      |                                   | .. note::                                                                                                                                                                                   |
      |                                   |                                                                                                                                                                                             |
      |                                   |    After a synchronization task is started, the performance of the source and destination databases may be affected. You are advised to start a synchronization task during off-peak hours. |
      +-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

#. After the task is submitted, you can view and manage it on the **Data Synchronization Management** page.

   -  You can view the task status. For more information about task status, see :ref:`Task Statuses <drs_06_0004>`.
   -  You can click |image1| in the upper-right corner to view the latest task status.

.. |image1| image:: /_static/images/en-us_image_0000001758549405.png
