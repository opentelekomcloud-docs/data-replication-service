:original_name: drs_11_0015.html

.. _drs_11_0015:

Checking Whether the Source Database Binlog Is Row-Based
========================================================

MySQL Migration
---------------

.. table:: **Table 1** Checking whether the source database binlog is row-based

   +---------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Check Item                            | Whether the source database binlog is row-based                                                                                                                                                                                    |
   +---------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Description                           | Check whether the source database binlog is row-based.                                                                                                                                                                             |
   +---------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Failure Cause and Handling Suggestion | Failure cause: This item cannot be checked because the source database fails to be connected.                                                                                                                                      |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       | Handling suggestion: Check whether the source database is connected.                                                                                                                                                               |
   +---------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   |                                       | Failure cause: Insufficient user permissions                                                                                                                                                                                       |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       | Handling suggestion: Check whether the database user permissions meet the migration requirements.                                                                                                                                  |
   +---------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   |                                       | Failure cause: The source database binlog is not row-based.                                                                                                                                                                        |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       | Handling suggestion:                                                                                                                                                                                                               |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       | -  If the source database is an on-premises database, perform the following operations to change the binlog format of the source database:                                                                                         |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       |    Method 1: You can modify the **my.cnf** or **my.ini** configuration file and restart the database.                                                                                                                              |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       |    .. code:: text                                                                                                                                                                                                                  |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       |       binlog_format=row                                                                                                                                                                                                            |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       |    Method 2: Stop all service connections.                                                                                                                                                                                         |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       |    .. code:: text                                                                                                                                                                                                                  |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       |       set global binlog_format='ROW'                                                                                                                                                                                               |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       |    Modify the **my.cnf** or **my.ini** configuration file.                                                                                                                                                                         |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       |    .. code:: text                                                                                                                                                                                                                  |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       |       binlog_format=row                                                                                                                                                                                                            |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       |    In the **ROW** format, the log growth rate increases, which may occupy more disk space.                                                                                                                                         |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       |    .. note::                                                                                                                                                                                                                       |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       |       The **MySQL Global binlog_format** parameter does not take effect for connected sessions. For details about how to switch format, see :ref:`How Do I Set Global binlog_format=ROW to Take Effect Immediately? <drs_16_0002>` |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       | -  If the source database is an RDS DB instance on the cloud, change the **binlog_format** value of the source database to **ROW**. After the change, restart the database for the change to take effect.                          |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       |    .. note::                                                                                                                                                                                                                       |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       |       The **MySQL Global binlog_format** parameter does not take effect for connected sessions. For details about how to switch format, see :ref:`How Do I Set Global binlog_format=ROW to Take Effect Immediately? <drs_16_0002>` |
   +---------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   |                                       | Failure cause: An internal error occurs.                                                                                                                                                                                           |
   |                                       |                                                                                                                                                                                                                                    |
   |                                       | Handling suggestion: Contact technical support.                                                                                                                                                                                    |
   +---------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
